<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Welbert Rodrigues</title>
  
  <!-- Meta Tags para SEO -->
  <meta name="description" content="Site minimalista e intuitivo de Welbert Rodrigues com galeria de desenhos e informações para agendamento de tatuagens." />
  <meta name="keywords" content="Welbert Rodrigues, tatuagens, portfólio, agendamento, minimalista" />

  <!-- Meta Tags Open Graph -->
  <meta property="og:title" content="Welbert Rodrigues" />
  <meta property="og:description" content="Conheça o trabalho de Welbert Rodrigues e agende sua tatuagem." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://welbertr.github.io" />
  <meta property="og:image" content="https://welbertr.github.io/images/preview.jpg" />

  <!-- Pré-conexão para fontes -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Fonte minimalista do Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet" />

  <style>
    /* [Mantém todo o CSS anterior inalterado...] */

    /* Exemplo de estilos relevantes (formulário e mensagem): */
    #waitlist-form {
      margin: 40px 0;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #fff;
      transition: opacity 0.8s ease;
    }
    #waitlist-form fieldset legend {
      font-weight: 500;
      margin: 10px 0 10px 0; 
      display: block;
    }
    .form-message {
      margin-top: 10px;
      font-weight: bold;
    }

    /* (Resto do CSS permanece inalterado) */
  </style>
</head>
<body>
  <!-- Pular para o conteúdo -->
  <a href="#main-content" class="skip-link">Pular para o conteúdo</a>
  
  <header class="sticky-header" role="banner">
    <div class="top-name" aria-label="Nome do artista">WELBERT RODRIGUES</div>
    <div class="top-controls">
      <button id="gallery-toggle-btn" onclick="toggleGalleryInfo()" aria-label="Alternar entre galeria e informações">INFO</button>
      <button id="lang-btn" onclick="toggleLanguage()" aria-label="Alternar idioma">EN</button>
    </div>
    <p id="availability-text" style="text-align: center;">Consulte disponibilidade.</p>
    <hr class="custom-line">
  </header>
  
  <main id="main-content">
    <!-- Seção da Galeria -->
    <section id="gallery-section" class="section">
      <div class="gallery" aria-label="Galeria de desenhos"></div>
    </section>
    
    <!-- Seção de Informações -->
    <section id="info" class="section hidden" aria-label="Informações para agendamento">
      <!-- Conteúdo PT e EN permanecem inalterados -->
      <!-- ... -->
    </section>
    
    <!-- Seção do Formulário da Lista de Espera -->
    <section id="waitlist-form" class="section hidden">
      <!-- Versão PT -->
      <div id="waitlist-form-pt">
        <h2>Inscrição na Lista de Espera</h2>
        <p>
          Se a sua cidade ainda não está na minha agenda, inscreva-se na lista de espera!  
          Assim que confirmar uma data para viajar até a sua região, avisarei os inscritos com antecedência – garantindo prioridade na escolha do horário.  
          <br><em>Obs.: Entrarei em contato somente quando a data estiver confirmada.</em>
        </p>
        <!-- Container para mensagem -->
        <div class="form-message"></div>
        <form id="myFormPt" class="waitlist-form" action="https://getform.io/f/ajjmdnqa" method="POST" enctype="multipart/form-data">
          <label for="nome">Nome *</label>
          <input type="text" id="nome" name="nome" required>
          
          <label for="idade">Idade *</label>
          <input type="number" id="idade" name="idade" required>
          
          <label for="cidade">Cidade *</label>
          <input type="text" id="cidade" name="cidade" required>
          
          <label for="estado">Estado *</label>
          <input type="text" id="estado" name="estado" required>
          
          <label for="telefone">Celular com DDD</label>
          <input type="tel" id="telefone" name="telefone">
          
          <label for="email">E-mail *</label>
          <input type="email" id="email" name="email" required>
          
          <label for="instagram">Instagram *</label>
          <input type="text" id="instagram" name="instagram" required>
          
          <label for="tattoo">O que gostaria de tatuar? *</label>
          <input type="text" id="tattoo" name="tattoo" required>
          
          <label for="reference-image">Imagem de Referência:</label>
          <input type="file" id="reference-image" name="reference-image" accept="image/*">
          
          <label for="tamanho">Tamanho aproximado (em cm) *</label>
          <input type="number" id="tamanho" name="tamanho" required>
          
          <label for="local">Local do corpo *</label>
          <input type="text" id="local" name="local" required>
          
          <fieldset>
            <legend>Já tatuou comigo anteriormente? *</legend>
            <div class="radio-inline">
              <input type="radio" id="sim" name="tatuagem" value="Sim" required>
              <label for="sim">Sim</label>
            </div>
            <div class="radio-inline">
              <input type="radio" id="nao" name="tatuagem" value="Não" required>
              <label for="nao">Não</label>
            </div>
          </fieldset>
          
          <button type="submit">Inscrever-se</button>
        </form>
      </div>
      <!-- Versão EN -->
      <div id="waitlist-form-en" class="hidden">
        <h2>Waitlist Registration</h2>
        <p>
          If your city is not currently scheduled on my calendar, sign up for the waitlist!  
          Once I confirm a date to travel to your area, I will notify those registered – ensuring you have priority when booking your appointment.
          <br><em>Note: I will contact you only when the date is confirmed.</em>
        </p>
        <!-- Container para mensagem -->
        <div class="form-message"></div>
        <form id="myFormEn" class="waitlist-form" action="https://getform.io/f/ajjmdnqa" method="POST" enctype="multipart/form-data">
          <label for="name">Name *</label>
          <input type="text" id="name" name="name" required>
          
          <label for="age">Age *</label>
          <input type="number" id="age" name="age" required>
          
          <label for="city">City *</label>
          <input type="text" id="city" name="city" required>
          
          <label for="state">State *</label>
          <input type="text" id="state" name="state" required>
          
          <label for="country">Country *</label>
          <input type="text" id="country" name="country" required>
          
          <label for="phone">Phone with area code</label>
          <input type="tel" id="phone" name="phone">
          
          <label for="emailEn">E-mail *</label>
          <input type="email" id="emailEn" name="email" required>
          
          <label for="instagramEn">Instagram *</label>
          <input type="text" id="instagramEn" name="instagram" required>
          
          <label for="tattooEn">What tattoo would you like? *</label>
          <input type="text" id="tattooEn" name="tattoo" required>
          
          <label for="reference-image-en">Reference Image:</label>
          <input type="file" id="reference-image-en" name="reference-image" accept="image/*">
          
          <label for="size">Approximate size (in cm) *</label>
          <input type="number" id="size" name="size" required>
          
          <label for="bodyLocation">Body location *</label>
          <input type="text" id="bodyLocation" name="bodyLocation" required>
          
          <fieldset>
            <legend>Have you been tattooed by me before? *</legend>
            <div class="radio-inline">
              <input type="radio" id="yes" name="tattooedBefore" value="Yes" required>
              <label for="yes">Yes</label>
            </div>
            <div class="radio-inline">
              <input type="radio" id="no" name="tattooedBefore" value="No" required>
              <label for="no">No</label>
            </div>
          </fieldset>
          
          <button type="submit">Submit</button>
        </form>
      </div>
    </section>
    
    <!-- Seção de Contato -->
    <section id="contact-section">
      <h2 class="contact-title" onclick="toggleContato()" role="button" aria-expanded="false" aria-controls="contato-info">CONTATO | CONTACT</h2>
      <div id="contato-info" class="accordion-content" role="region">
        <p><span class="contato-label">E-mail:</span> <a href="mailto:Welbertc.rodriguess@gmail.com" class="email">Welbertc.rodriguess@gmail.com</a></p>
        <p><span class="contato-label">WhatsApp:</span> <a href="https://wa.me/5531920022832" target="_blank" rel="noopener noreferrer" class="whatsapp">+55 31 92002-2832</a></p>
        <p><a href="https://www.instagram.com/we.ro___" target="_blank" rel="noopener noreferrer" class="instagram-btn">INSTAGRAM</a></p>
      </div>
    </section>
  </main>
  
  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Visualização ampliada">
    <button class="close-btn" onclick="closeLightbox()" aria-label="Fechar">&times;</button>
    <button class="prev-btn" onclick="changeImage(-1)" aria-label="Imagem anterior">&lt;</button>
    <img id="lightbox-img" src="" alt="Imagem ampliada">
    <button class="next-btn" onclick="changeImage(1)" aria-label="Próxima imagem">&gt;</button>
  </div>
  
  <script>
    // Remoção do parâmetro "fbclid" da URL, se presente.
    if (window.location.search.includes('fbclid')) {
      const url = new URL(window.location);
      url.searchParams.delete('fbclid');
      history.replaceState(null, '', url.pathname + url.search);
    }
    
    // Array com os números das imagens que realmente existem
    const imagensValidas = [
      1,2,3,4,5,6,7,8,9,10,11,12,13,
      16,17,18,20,21,22,23,24,25,26,
      27,28,29,30,31,32,33,34,35,36,37,
      38,39,40,41,42,43,44,45,46,47,48,
      49,50,51,52,53,54,55,56,57,58,59,
      60,61,62,63,64,65,66,67,68,69,70,
      71,72,73,74,75,76,77,78,79,80,
    ];
    imagensValidas.reverse();
  
    const galleryContainer = document.querySelector('.gallery');
    const galleryFragment = document.createDocumentFragment();
    imagensValidas.forEach(num => {
      const img = document.createElement('img');
      img.src = `images/desenho${num}.jpg`;
      img.alt = `Desenho ${num}`;
      img.loading = 'lazy';
      img.onerror = function() {
        this.onerror = null;
        this.src = 'images/placeholder.jpg';
      };
      img.onclick = () => openLightbox(num);
      galleryFragment.appendChild(img);
    });
    galleryContainer.appendChild(galleryFragment);
  
    let currentIndex = 0;
    function openLightbox(num) {
      currentIndex = imagensValidas.indexOf(num);
      document.getElementById("lightbox").style.display = "flex";
      updateLightboxImage();
    }
    function closeLightbox() {
      document.getElementById("lightbox").style.display = "none";
    }
    function changeImage(direction) {
      currentIndex += direction;
      if (currentIndex < 0) currentIndex = imagensValidas.length - 1;
      if (currentIndex >= imagensValidas.length) currentIndex = 0;
      updateLightboxImage();
    }
    function updateLightboxImage() {
      document.getElementById("lightbox-img").src = `images/desenho${imagensValidas[currentIndex]}.jpg`;
    }
  
    // Tratamento para os links "waitlist-link"
    document.querySelectorAll('.waitlist-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        localStorage.setItem("section", "waitlist");
        loadState();
        document.getElementById("waitlist-form").scrollIntoView({ behavior: "smooth" });
      });
    });
    
    // Intercepta o envio dos formulários de inscrição e exibe mensagens.
    // Usa mode: "no-cors" para contornar restrições do Getform.
    document.querySelectorAll("form.waitlist-form").forEach(form => {
      form.addEventListener("submit", async (event) => {
        event.preventDefault();
        console.log("Formulário submetido:", form.id);
        
        // Encontra o contêiner para a mensagem (dentro do bloco do formulário)
        const formMessage = form.parentElement.querySelector(".form-message");
        formMessage.textContent = "";
  
        // Cria o objeto FormData
        const formData = new FormData(form);
  
        try {
          console.log("Enviando dados para:", form.action);
          const response = await fetch(form.action, {
            method: "POST",
            body: formData,
            mode: "no-cors"
          });
          console.log("Resposta recebida:", response);
          // Se o response.type for "opaque", trata como sucesso
          if(response.type === "opaque"){
            if(form.id === "myFormPt"){
              formMessage.style.color = "#007BFF";
              formMessage.textContent = "Obrigado! Recebi sua inscrição e, em breve, entrarei em contato.";
            } else {
              formMessage.style.color = "#007BFF";
              formMessage.textContent = "Thank you! Your registration was received, and I will contact you shortly.";
            }
            form.reset();
          } else {
            // Caso contrário, trata como erro
            if(form.id === "myFormPt"){
              formMessage.style.color = "#007BFF";
              formMessage.textContent = "Não foi possível enviar sua mensagem. Por favor, tente novamente.";
            } else {
              formMessage.style.color = "#007BFF";
              formMessage.textContent = "Unable to send your message. Please try again.";
            }
          }
        } catch (error) {
          console.error("Erro no envio:", error);
          if(form.id === "myFormPt"){
            formMessage.style.color = "#007BFF";
            formMessage.textContent = "Falha de conexão. Por favor, verifique sua internet e tente novamente.";
          } else {
            formMessage.style.color = "#007BFF";
            formMessage.textContent = "Connection failed. Please check your internet and try again.";
          }
        }
      });
    });
    
    const accordionMapping = {
      "orcamento": { pt: "orcamento-pt", en: "pricing-en", btnPt: "btn-orcamento-pt", btnEn: "btn-pricing-en" },
      "agendamento": { pt: "agendamento-pt", en: "booking-en", btnPt: "btn-agendamento-pt", btnEn: "btn-booking-en" },
      "lista-espera": { pt: "lista-espera-pt", en: "waitlist-en", btnPt: "btn-lista-espera-pt", btnEn: "btn-waitlist-en" },
      "dia-sessao": { pt: "dia-sessao-pt", en: "session-day-en", btnPt: "btn-dia-sessao-pt", btnEn: "btn-session-day-en" }
    };
  
    function toggleLanguage() {
      const currentLanguage = localStorage.getItem("language") || "pt";
      const activeAccordions = [];
      
      Object.keys(accordionMapping).forEach(key => {
        if (currentLanguage === "pt") {
          const elem = document.getElementById(accordionMapping[key].pt);
          if (elem && elem.classList.contains("active")) {
            activeAccordions.push(key);
          }
        } else {
          const elem = document.getElementById(accordionMapping[key].en);
          if (elem && elem.classList.contains("active")) {
            activeAccordions.push(key);
          }
        }
      });
  
      const contentPt = document.getElementById("content-pt");
      const contentEn = document.getElementById("content-en");
      const waitlistFormPt = document.getElementById("waitlist-form-pt");
      const waitlistFormEn = document.getElementById("waitlist-form-en");
      const langBtn = document.getElementById("lang-btn");
      const galleryToggleBtn = document.getElementById("gallery-toggle-btn");
      const availabilityText = document.getElementById("availability-text");
  
      if (currentLanguage === "en") {
        contentPt.classList.remove("hidden");
        contentEn.classList.add("hidden");
        waitlistFormPt.classList.remove("hidden");
        waitlistFormEn.classList.add("hidden");
        langBtn.textContent = "EN";
        galleryToggleBtn.textContent = localStorage.getItem("section") === "info" ? "DESENHOS" : "INFO";
        availabilityText.textContent = "Consulte disponibilidade.";
        localStorage.setItem("language", "pt");
      } else {
        contentPt.classList.add("hidden");
        contentEn.classList.remove("hidden");
        waitlistFormPt.classList.add("hidden");
        waitlistFormEn.classList.remove("hidden");
        langBtn.textContent = "PT";
        galleryToggleBtn.textContent = localStorage.getItem("section") === "info" ? "DESIGNS" : "INFO";
        availabilityText.textContent = "Check availability.";
        localStorage.setItem("language", "en");
      }
  
      Object.keys(accordionMapping).forEach(key => {
        const ptElem = document.getElementById(accordionMapping[key].pt);
        const ptBtn = document.getElementById(accordionMapping[key].btnPt);
        if (ptElem && ptBtn) {
          ptElem.classList.remove("active");
          ptBtn.setAttribute("aria-expanded", "false");
        }
        const enElem = document.getElementById(accordionMapping[key].en);
        const enBtn = document.getElementById(accordionMapping[key].btnEn);
        if (enElem && enBtn) {
          enElem.classList.remove("active");
          enBtn.setAttribute("aria-expanded", "false");
        }
      });
  
      const newLang = localStorage.getItem("language");
      activeAccordions.forEach(key => {
        if (newLang === "pt") {
          const elem = document.getElementById(accordionMapping[key].pt);
          const btn = document.getElementById(accordionMapping[key].btnPt);
          if (elem && btn) {
            elem.classList.add("active");
            btn.setAttribute("aria-expanded", "true");
          }
        } else {
          const elem = document.getElementById(accordionMapping[key].en);
          const btn = document.getElementById(accordionMapping[key].btnEn);
          if (elem && btn) {
            elem.classList.add("active");
            btn.setAttribute("aria-expanded", "true");
          }
        }
      });
    }
  
    function toggleGalleryInfo() {
      document.getElementById("contato-info").classList.remove("active");
      const gallerySection = document.getElementById("gallery-section");
      const infoSection = document.getElementById("info");
      const waitlistFormSection = document.getElementById("waitlist-form");
      const galleryToggleBtn = document.getElementById("gallery-toggle-btn");
      const language = localStorage.getItem("language") || "pt";
      const availabilityText = document.getElementById("availability-text");
      const customLine = document.querySelector('.custom-line');
  
      if (localStorage.getItem("section") === "waitlist") {
         waitlistFormSection.classList.add("hidden");
         gallerySection.classList.add("hidden");
         infoSection.classList.remove("hidden");
         galleryToggleBtn.textContent = language === "en" ? "DESIGNS" : "DESENHOS";
         localStorage.setItem("section", "info");
         availabilityText.style.display = "none";
         customLine.style.display = "none";
         return;
      }
  
      if (!gallerySection.classList.contains("hidden")) {
         gallerySection.classList.add("hidden");
         infoSection.classList.remove("hidden");
         galleryToggleBtn.textContent = language === "en" ? "DESIGNS" : "DESENHOS";
         localStorage.setItem("section", "info");
         availabilityText.style.display = "none";
         customLine.style.display = "none";
      } else {
         gallerySection.classList.remove("hidden");
         infoSection.classList.add("hidden");
         galleryToggleBtn.textContent = "INFO";
         localStorage.setItem("section", "gallery");
         availabilityText.style.display = "block";
         customLine.style.display = "block";
      }
    }
  
    function toggleAccordion(id, btnId) {
      const content = document.getElementById(id);
      const button = document.getElementById(btnId);
      if (content.classList.contains("active")) {
        content.classList.remove("active");
        button.setAttribute("aria-expanded", "false");
      } else {
        content.classList.add("active");
        button.setAttribute("aria-expanded", "true");
      }
    }
  
    function toggleContato() {
      const contatoInfo = document.getElementById("contato-info");
      const contactSection = document.getElementById("contact-section");
      if (contatoInfo.classList.contains("active")) {
        contatoInfo.classList.remove("active");
        document.querySelector('.contact-title').setAttribute("aria-expanded", "false");
      } else {
        contatoInfo.classList.add("active");
        document.querySelector('.contact-title').setAttribute("aria-expanded", "true");
        const yOffset = -150;
        const y = contactSection.getBoundingClientRect().top + window.pageYOffset + yOffset;
        window.scrollTo({ top: y, behavior: 'smooth' });
      }
    }
  
    function loadState() {
      if (window.location.hash === "#info") {
        localStorage.setItem("section", "info");
        history.replaceState(null, null, window.location.pathname);
      } else if (window.location.hash === "#gallery") {
        localStorage.setItem("section", "gallery");
        history.replaceState(null, null, window.location.pathname);
      } else if (window.location.hash === "#waitlist-form") {
        localStorage.setItem("section", "waitlist");
        history.replaceState(null, null, window.location.pathname);
      }
      if (!localStorage.getItem("section")) {
        localStorage.setItem("section", "gallery");
      }
      
      const contentPt = document.getElementById("content-pt");
      const contentEn = document.getElementById("content-en");
      const langBtn = document.getElementById("lang-btn");
      const galleryToggleBtn = document.getElementById("gallery-toggle-btn");
      const language = localStorage.getItem("language") || "pt";
      const availabilityText = document.getElementById("availability-text");
      const customLine = document.querySelector('.custom-line');
      const gallerySection = document.getElementById("gallery-section");
      const infoSection = document.getElementById("info");
      const waitlistFormSection = document.getElementById("waitlist-form");
      
      if (language === "en") {
        contentPt.classList.add("hidden");
        contentEn.classList.remove("hidden");
      } else {
        contentPt.classList.remove("hidden");
        contentEn.classList.add("hidden");
      }
      
      const section = localStorage.getItem("section");
      if (section === "info") {
        gallerySection.classList.add("hidden");
        infoSection.classList.remove("hidden");
        waitlistFormSection.classList.add("hidden");
        galleryToggleBtn.textContent = language === "en" ? "DESIGNS" : "DESENHOS";
        availabilityText.style.display = "none";
        customLine.style.display = "none";
      } else if (section === "waitlist") {
        gallerySection.classList.add("hidden");
        infoSection.classList.add("hidden");
        waitlistFormSection.classList.remove("hidden");
        galleryToggleBtn.textContent = "INFO";
        availabilityText.style.display = "none";
        customLine.style.display = "none";
      } else {
        gallerySection.classList.remove("hidden");
        infoSection.classList.add("hidden");
        waitlistFormSection.classList.add("hidden");
        galleryToggleBtn.textContent = "INFO";
        availabilityText.style.display = "block";
        customLine.style.display = "block";
      }
      
      if (language === "en") {
        document.getElementById("waitlist-form-pt").classList.add("hidden");
        document.getElementById("waitlist-form-en").classList.remove("hidden");
      } else {
        document.getElementById("waitlist-form-pt").classList.remove("hidden");
        document.getElementById("waitlist-form-en").classList.add("hidden");
      }
    }
  
    loadState();
  
    document.querySelectorAll('[role="button"]:not(button)').forEach(elem => {
      if (!elem.hasAttribute('tabindex')) {
        elem.setAttribute('tabindex', '0');
      }
      elem.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          elem.click();
        }
      });
    });
  </script>
</body>
</html>